"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[973],{5754:function(e,t,a){a.r(t),a.d(t,{default:function(){return G}});var s=a(6768);const n=e=>((0,s.Qi)("data-v-5f03b32a"),e=e(),(0,s.jt)(),e),o={class:"containerlogin relative flex items-start h-screen"},r=n((()=>(0,s.Lk)("div",{class:"overlay absolute inset-0 bg-[#196aee] opacity-50"},null,-1))),l={class:"form-wrapper relative w-full sm:w-3/4 md:w-2/4 lg:w-1/4 h-full p-4 bg-[#ffffff] text-white shadow-lg"},i={class:"formLogin h-full flex flex-col justify-center"};function u(e,t,a,n,u,c){const d=(0,s.g2)("FormAuthVue");return(0,s.uX)(),(0,s.CE)("div",o,[r,(0,s.Lk)("div",l,[(0,s.Lk)("div",i,[(0,s.bF)(d,{onValidateLogin:n.onValidateLogin},null,8,["onValidateLogin"])])])])}a(4114);var c=a(144),d=a(973),m=a(5130),p=a(554),f=a(9262),v=a(3651),b=a(1950),g=a(4587),w=a(1247),h=a(4600);const y=(0,g.j)({...(0,f.u)(),...(0,v.pE)()},"VForm"),k=(0,w.RW)()({name:"VForm",props:y(),emits:{"update:modelValue":e=>!0,submit:e=>!0},setup(e,t){let{slots:a,emit:n}=t;const o=(0,v.DG)(e),r=(0,c.KR)();function l(e){e.preventDefault(),o.reset()}function i(e){const t=e,a=o.validate();t.then=a.then.bind(a),t.catch=a.catch.bind(a),t.finally=a.finally.bind(a),n("submit",t),t.defaultPrevented||a.then((e=>{let{valid:t}=e;t&&r.value?.submit()})),t.preventDefault()}return(0,h.C)((()=>(0,s.bF)("form",{ref:r,class:["v-form",e.class],style:e.style,novalidate:!0,onReset:l,onSubmit:i},[a.default?.(o)]))),(0,b.O)(o,r)}});var L=a(4750);const x=e=>((0,s.Qi)("data-v-d810c222"),e=e(),(0,s.jt)(),e),V={class:"flex items-center justify-center min-h-screen bg-[#ffffff] p-4"},A={class:"w-full max-w-md bg-transparent shadow-none p-6"},_={class:"flex justify-center mb-4"},F=["src"],E=x((()=>(0,s.Lk)("h1",{class:"text-lg text-[#0571ec] text-center mb-4 font-bold"},"Bienvenido de nuevo a eBeacons!!",-1))),I=x((()=>(0,s.Lk)("p",{class:"text-xs text-gray-900 text-center mb-4"}," Ingresa sus credenciales ",-1))),R=x((()=>(0,s.Lk)("div",{class:"mt-8 text-gray-400 text-sm text-center"},[(0,s.Lk)("p",{class:"font-semibold"}," Presencia en tiempo real, "),(0,s.Lk)("p",null," decisiones al instante. ")],-1)));function C(e,t,a,n,o,r){return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("div",A,[(0,s.Lk)("div",_,[(0,s.Lk)("img",{src:o.LogoImage,alt:"Logo",class:"w-20 h-20"},null,8,F)]),E,I,(0,s.bF)(k,{onSubmit:(0,m.D$)(n.validateLogin,["prevent"])},{default:(0,s.k6)((()=>[(0,s.bF)(L.W,{modelValue:n.username,"onUpdate:modelValue":t[0]||(t[0]=e=>n.username=e),label:"Usuario","prepend-inner-icon":"mdi-account-outline",variant:"outlined",color:"#0571ec",class:"text-black w-full mb-4"},null,8,["modelValue"]),(0,s.bF)(L.W,{modelValue:n.password,"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),label:"Contraseña","append-inner-icon":n.showPassword?"mdi-eye-off":"mdi-eye",type:n.showPassword?"text":"password","prepend-inner-icon":"mdi-lock-outline",variant:"outlined",color:"#0571ec",class:"text-black w-full mb-4","onClick:appendInner":n.togglePasswordVisibility},null,8,["modelValue","append-inner-icon","type","onClick:appendInner"]),(0,s.bF)(p.D,{type:"submit",color:"#196aee",class:"w-full mt-4 font-bold"},{default:(0,s.k6)((()=>[(0,s.eW)("Ingresar")])),_:1})])),_:1},8,["onSubmit"]),R])])}var P=a.p+"img/logo_sysnet.54cf177c.png",j={data(){return{LogoImage:P}},emits:["validate-login"],setup(e,{emit:t}){const a=(0,c.KR)(""),s=(0,c.KR)(""),n=(0,c.KR)(!1),o=()=>{const e={username:a.value,password:s.value};t("validate-login",e)},r=()=>{n.value=!n.value};return{username:a,password:s,validateLogin:o,togglePasswordVisibility:r,showPassword:n}}},D=a(1241);const K=(0,D.A)(j,[["render",C],["__scopeId","data-v-d810c222"]]);var q=K,U=a(1189);const W="http://198.211.99.223:3000/api/v1";function $(e){return U.A.post(`${W}/auth/login`,e)}const B="http://198.211.99.223:3000/api/v1";function S(e){return U.A.get(`${B}/menu-navigation`,{headers:{Authorization:`Bearer ${e}`}})}var Q=a(5129),X={components:{FormAuthVue:q},setup(){const e=(0,c.KR)(""),t=(0,c.KR)(!1),a=(0,d.rd)(),n=(0,d.lq)(),o=async s=>{try{const e=await $(s),t=e.data.data,n=t.token;Q.A.commit("setUsername",t.username),Q.A.commit("setToken",n),Q.A.commit("setRole",t.role),Q.A.commit("setIsAuthenticated",!0);const o=await S(n);o.status&&Array.isArray(o.data.data)?Q.A.commit("setMenuData",o.data.data):console.error("La respuesta del menú no es válida:",o),a.push("/")}catch(n){t.value=!0,n.response?401===n.response.status?e.value="Las credenciales de usuario no son válidas":500===n.response.status?e.value="Error 500: Error interno del servidor":e.value=n.response.data.message:n.request?e.value="No se recibió respuesta del servidor":e.value="Error al configurar la solicitud: "+n.message,console.error("Error en el proceso de inicio de sesión:",n)}};return(0,s.sV)((()=>{const e=n.query.username,t=n.query.password;e&&t&&o({username:e,password:t})})),{onValidateLogin:o,messageError:e,statusError:t}}};const z=(0,D.A)(X,[["render",u],["__scopeId","data-v-5f03b32a"]]);var G=z}}]);
//# sourceMappingURL=973.1222b238.js.map