"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[303],{1385:function(e,t,a){a.d(t,{EM:function(){return u},I4:function(){return s},K_:function(){return n},W6:function(){return d},pu:function(){return o},tS:function(){return i}});var r=a(1189);const l="http://198.211.99.223:3000/api/v1";function o(e){return r.A.get(`${l}/mobiles-items`,{headers:{Authorization:`Bearer ${e}`}})}function s(e,t){return r.A.delete(`${l}/mobiles-items/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function n(e,t){return r.A.post(`${l}/mobiles-items/delete`,{headers:{Authorization:`Bearer ${e}`},data:t})}function i(e,t){return r.A.post(`${l}/mobiles-items`,t,{headers:{Authorization:`Bearer ${e}`}})}function d(e,t,a){return r.A.patch(`${l}/mobiles-items/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}function u(e,t){return r.A.post(`${l}/mobiles-items/updatetype`,t,{headers:{Authorization:`Bearer ${e}`}})}},4303:function(e,t,a){a.r(t),a.d(t,{default:function(){return Se}});var r=a(6768);const l={class:"flex justify-between items-center"},o=(0,r.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"}," Grupo de Etiquetas",-1),s={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-50"},n=(0,r.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,r.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,r.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1),i=[n];function d(e,t,a,n,d,u){const c=(0,r.g2)("DataTable"),m=(0,r.g2)("AntennasModal"),b=(0,r.g2)("createForm"),g=(0,r.g2)("EditForm");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",null,[(0,r.Lk)("div",l,[o,(0,r.Lk)("button",{class:"flex items-center justify-center bg-[#318bf1] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:t[0]||(t[0]=(...e)=>n.openCreateForm&&n.openCreateForm(...e))}," Crear + ")]),(0,r.bF)(c,{items:n.items,onViewAntennas:n.listAntennas,onDeleteItem:n.deleteItems,onEditItem:n.openEditForm},null,8,["items","onViewAntennas","onDeleteItem","onEditItem"]),n.isAntennasModalVisible?((0,r.uX)(),(0,r.Wv)(m,{key:0,antennas:n.selectedAntennas,onClose:n.closeAntennaModal,isVisible:n.isAntennasModalVisible},null,8,["antennas","onClose","isVisible"])):(0,r.Q3)("",!0),n.isCreateFormVisible?((0,r.uX)(),(0,r.Wv)(b,{key:1,onClose:n.closeCreateForm,onItemCreate:n.submitItems},null,8,["onClose","onItemCreate"])):(0,r.Q3)("",!0),n.isEditFormVisible?((0,r.uX)(),(0,r.Wv)(g,{key:2,item:n.selectedItem,onClose:n.closeEditForm,onUpdateItem:n.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,r.Q3)("",!0)]),n.isLoading?((0,r.uX)(),(0,r.CE)("div",s,i)):(0,r.Q3)("",!0)],64)}var u=a(144),c=a(1189);const m="http://198.211.99.223:3000/api/v1";function b(e){return c.A.get(`${m}/group-mobileitems`,{headers:{Authorization:`Bearer ${e}`}})}function g(e,t){return c.A.delete(`${m}/group-mobileitems/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function v(e,t){return c.A.post(`${m}/group-mobileitems`,t,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t,a){return c.A.patch(`${m}/group-mobileitems/${a}`,t,{headers:{Authorization:`Bearer ${e}`}})}var f=a(4232);const y=e=>((0,r.Qi)("data-v-77eceabc"),e=e(),(0,r.jt)(),e),k={class:"overflow-y-auto bg-white rounded-lg shadow-lg max-w-md w-full p-0",style:{"max-height":"80vh","margin-bottom":"1rem"}},h=y((()=>(0,r.Lk)("div",{class:"flex justify-between items-center p-2 border-b bg-blue-500 text-white rounded-t-lg"},[(0,r.Lk)("h1",{class:"text-xl flex items-center"},[(0,r.Lk)("i",{class:"mdi mdi-tag-multiple text-white text-3xl ml-2"}),(0,r.eW)(" Etiquetas ")])],-1))),x={class:"p-4"},w={class:"divide-y divide-gray-300"},C={class:"flex-1"},L={class:"font-semibold text-gray-800"},I={class:"font-semibold text-gray-800"},A=y((()=>(0,r.Lk)("i",{class:"mdi mdi-information-outline text-gray-400 hover:text-gray-600 text-xl cursor-pointer transition"},null,-1))),E={class:"flex justify-end p-4 border-t bg-gray-100 rounded-b-lg"};function _(e,t,a,l,o,s){return a.isVisible?((0,r.uX)(),(0,r.CE)("div",{key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50",onClick:t[1]||(t[1]=(...e)=>s.closeModal&&s.closeModal(...e))},[(0,r.Lk)("div",k,[h,(0,r.Lk)("div",x,[(0,r.Lk)("ul",w,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(a.antennas,((e,t)=>((0,r.uX)(),(0,r.CE)("li",{key:t,class:"py-4 flex items-center space-x-4"},[(0,r.Lk)("div",C,[(0,r.Lk)("p",L,"Mac: "+(0,f.v_)(e.mac),1),(0,r.Lk)("p",I,"Nombre: "+(0,f.v_)(e.name),1)]),A])))),128))])]),(0,r.Lk)("div",E,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>s.closeModal&&s.closeModal(...e)),class:"px-4 py-2 text-sm font-medium text-white bg-blue-500 rounded-lg hover:bg-blue-600 transition"}," Cerrar ")])])])):(0,r.Q3)("",!0)}var F={name:"ViewAreas",props:{antennas:{type:Array,required:!0},isVisible:{type:Boolean,required:!0}},emits:["close"],methods:{closeModal(){this.$emit("close")}}},D=a(1241);const $=(0,D.A)(F,[["render",_],["__scopeId","data-v-77eceabc"]]);var K=$,V=a(5130);const S=e=>((0,r.Qi)("data-v-6f50ba38"),e=e(),(0,r.jt)(),e),j={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},X={class:"bg-white rounded-lg shadow-2xl max-w-4xl w-full p-8"},R=S((()=>(0,r.Lk)("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Crear Grupo de Etiquetas",-1))),T={class:"mb-6"},q=S((()=>(0,r.Lk)("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Nombre del Grupo",-1))),M={class:"flex gap-8"},B={class:"w-1/2 bg-gray-50 border border-gray-300 rounded-lg shadow p-4"},z={class:"flex justify-between items-center mb-4"},Q=S((()=>(0,r.Lk)("h3",{class:"text-lg font-medium text-gray-800"},"Etiquetas Disponibles",-1))),W=["onDragstart","onClick"],U={class:"w-1/2 bg-gray-50 border border-gray-300 rounded-lg shadow p-4"},G={class:"flex justify-between items-center mb-4"},N=S((()=>(0,r.Lk)("h3",{class:"text-lg font-medium text-gray-800"},"Etiquetas Seleccionadas",-1))),J=["onDragstart","onClick"],P={class:"flex justify-end mt-8 space-x-4"},O=S((()=>(0,r.Lk)("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition"}," Guardar ",-1)));function H(e,t,a,l,o,s){return l.item?((0,r.uX)(),(0,r.CE)("div",j,[(0,r.Lk)("div",X,[R,(0,r.Lk)("form",{onSubmit:t[8]||(t[8]=(0,V.D$)(((...e)=>l.submitForm&&l.submitForm(...e)),["prevent"]))},[(0,r.Lk)("div",T,[q,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.form.name=e),class:"w-full border border-gray-300 rounded-lg py-3 px-4 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400",placeholder:"Ingrese el nombre del grupo",required:""},null,512),[[V.Jo,l.form.name]])]),(0,r.Lk)("div",M,[(0,r.Lk)("div",B,[(0,r.Lk)("div",z,[Q,(0,r.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>l.selectAll("available")),class:"text-blue-600 hover:underline font-medium"}," Seleccionar Todos ")]),(0,r.Lk)("div",{class:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white overflow-y-auto",onDragover:t[2]||(t[2]=(0,V.D$)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=e=>l.dropItem("available"))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.availableTags,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e._id,class:"bg-blue-50 border border-blue-200 rounded-lg p-2 mb-2 shadow-md cursor-pointer hover:bg-blue-100 transition",draggable:"true",onDragstart:t=>l.dragStart(e),onClick:t=>l.toggleSelection(e,"available")},(0,f.v_)(e.name),41,W)))),128))],32)]),(0,r.Lk)("div",U,[(0,r.Lk)("div",G,[N,(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>l.selectAll("selected")),class:"text-red-600 hover:underline font-medium"}," Quitar Todos ")]),(0,r.Lk)("div",{class:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white overflow-y-auto",onDragover:t[5]||(t[5]=(0,V.D$)((()=>{}),["prevent"])),onDrop:t[6]||(t[6]=e=>l.dropItem("selected"))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedTags,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e._id,class:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 shadow-md cursor-pointer hover:bg-red-100 transition",draggable:"true",onDragstart:t=>l.dragStart(e),onClick:t=>l.toggleSelection(e,"selected")},(0,f.v_)(e.name),41,J)))),128))],32)])]),(0,r.Lk)("div",P,[(0,r.Lk)("button",{type:"button",onClick:t[7]||(t[7]=(...e)=>l.closeDialog&&l.closeDialog(...e)),class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition"}," Cancelar "),O])],32)])])):(0,r.Q3)("",!0)}a(4114);var Y=a(1385),Z=a(5129),ee={emits:["close","ItemCreate"],setup(e,{emit:t}){const a=(0,u.KR)(!0),l=(0,u.KR)({name:""}),o=(0,u.KR)([]),s=(0,u.KR)([]);let n=null;const i=async()=>{const e=Z.A.state.token,t=await(0,Y.pu)(e);o.value=t.data.data},d=e=>{n={...e}},c=e=>{n&&(m(n,e),n=null)},m=(e,t)=>{"available"===t?(s.value=s.value.filter((t=>t._id!==e._id)),o.value=[...o.value,e]):"selected"===t&&(o.value=o.value.filter((t=>t._id!==e._id)),s.value=[...s.value,e])},b=(e,t)=>{const a="available"===t?"selected":"available";m(e,a)},g=e=>{"available"===e?(s.value.push(...o.value),o.value=[]):"selected"===e&&(o.value.push(...s.value),s.value=[])},v=()=>{t("close")},p=async()=>{const e={name:l.value.name,mobilesItems:s.value.map((e=>e._id))};console.log("Payload emitido:",e),t("ItemCreate",e)};return(0,r.sV)(i),{item:a,form:l,availableTags:o,selectedTags:s,dragStart:d,dropItem:c,toggleSelection:b,selectAll:g,closeDialog:v,submitForm:p}}};const te=(0,D.A)(ee,[["render",H],["__scopeId","data-v-6f50ba38"]]);var ae=te;const re=e=>((0,r.Qi)("data-v-551ce886"),e=e(),(0,r.jt)(),e),le={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},oe={class:"bg-white rounded-lg shadow-2xl max-w-4xl w-full p-8"},se=re((()=>(0,r.Lk)("h2",{class:"text-2xl font-bold text-gray-800 mb-6 text-center"},"Editar Área",-1))),ne={class:"mb-6"},ie=re((()=>(0,r.Lk)("label",{class:"block text-sm font-semibold text-gray-700 mb-2"},"Nombre del Área",-1))),de={class:"flex gap-8"},ue={class:"w-1/2 bg-gray-50 border border-gray-300 rounded-lg shadow p-4"},ce={class:"flex justify-between items-center mb-4"},me=re((()=>(0,r.Lk)("h3",{class:"text-lg font-medium text-gray-800"},"Etiquetas Disponibles",-1))),be=["onDragstart","onClick"],ge={class:"w-1/2 bg-gray-50 border border-gray-300 rounded-lg shadow p-4"},ve={class:"flex justify-between items-center mb-4"},pe=re((()=>(0,r.Lk)("h3",{class:"text-lg font-medium text-gray-800"},"Etiquetas Seleccionadas",-1))),fe=["onDragstart","onClick"],ye={class:"flex justify-end mt-8 space-x-4"},ke=re((()=>(0,r.Lk)("button",{type:"submit",class:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition"}," Guardar Cambios ",-1)));function he(e,t,a,l,o,s){return l.editedItem?((0,r.uX)(),(0,r.CE)("div",le,[(0,r.Lk)("div",oe,[se,(0,r.Lk)("form",{onSubmit:t[8]||(t[8]=(0,V.D$)(((...e)=>l.submitUpdate&&l.submitUpdate(...e)),["prevent"]))},[(0,r.Lk)("div",ne,[ie,(0,r.bo)((0,r.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>l.editedItem.name=e),class:"w-full border border-gray-300 rounded-lg py-3 px-4 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 placeholder-gray-400",placeholder:"Ingrese el nombre del área",required:""},null,512),[[V.Jo,l.editedItem.name]])]),(0,r.Lk)("div",de,[(0,r.Lk)("div",ue,[(0,r.Lk)("div",ce,[me,(0,r.Lk)("button",{type:"button",onClick:t[1]||(t[1]=e=>l.selectAll("available")),class:"text-blue-600 hover:underline font-medium"}," Seleccionar Todos ")]),(0,r.Lk)("div",{class:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white overflow-y-auto",onDragover:t[2]||(t[2]=(0,V.D$)((()=>{}),["prevent"])),onDrop:t[3]||(t[3]=e=>l.dropItem("available"))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.availableTags,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e._id,class:"bg-blue-50 border border-blue-200 rounded-lg p-2 mb-2 shadow-md cursor-pointer hover:bg-blue-100 transition",draggable:"true",onDragstart:t=>l.dragStart(e),onClick:t=>l.toggleSelection(e,"available")},(0,f.v_)(e.name),41,be)))),128))],32)]),(0,r.Lk)("div",ge,[(0,r.Lk)("div",ve,[pe,(0,r.Lk)("button",{type:"button",onClick:t[4]||(t[4]=e=>l.selectAll("selected")),class:"text-red-600 hover:underline font-medium"}," Quitar Todos ")]),(0,r.Lk)("div",{class:"border border-gray-200 rounded-lg p-4 min-h-[300px] bg-white overflow-y-auto",onDragover:t[5]||(t[5]=(0,V.D$)((()=>{}),["prevent"])),onDrop:t[6]||(t[6]=e=>l.dropItem("selected"))},[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.selectedTags,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e._id,class:"bg-red-50 border border-red-200 rounded-lg p-2 mb-2 shadow-md cursor-pointer hover:bg-red-100 transition",draggable:"true",onDragstart:t=>l.dragStart(e),onClick:t=>l.toggleSelection(e,"selected")},(0,f.v_)(e.name),41,fe)))),128))],32)])]),(0,r.Lk)("div",ye,[(0,r.Lk)("button",{type:"button",onClick:t[7]||(t[7]=t=>e.$emit("close")),class:"px-6 py-2 bg-gray-200 text-gray-700 rounded-lg font-medium hover:bg-gray-300 transition"}," Cancelar "),ke])],32)])])):(0,r.Q3)("",!0)}var xe={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const a=(0,u.KR)({...e.item}),l=(0,u.KR)([]),o=(0,u.KR)([...e.item.mobilesItems]);let s=null;(0,r.wB)((()=>e.item),(e=>{a.value={...e},o.value=[...e.mobilesItems]}));const n=async()=>{try{const e=Z.A.state.token,t=await(0,Y.pu)(e);l.value=t.data.data.filter((e=>!o.value.some((t=>t._id===e._id))))}catch(e){console.error("Error al obtener etiquetas:",e)}},i=e=>{s={...e}},d=e=>{s&&(c(s,e),s=null)},c=(e,t)=>{"available"===t?(o.value=o.value.filter((t=>t._id!==e._id)),l.value=[...l.value,e]):"selected"===t&&(l.value=l.value.filter((t=>t._id!==e._id)),o.value=[...o.value,e])},m=(e,t)=>{const a="available"===t?"selected":"available";c(e,a)},b=e=>{"available"===e?(o.value.push(...l.value),l.value=[]):"selected"===e&&(l.value.push(...o.value),o.value=[])},g=()=>{const e={...a.value,mobilesItems:o.value};t("updateItem",e)};return(0,r.sV)(n),{editedItem:a,availableTags:l,selectedTags:o,dragStart:i,dropItem:d,toggleSelection:m,selectAll:b,submitUpdate:g}}};const we=(0,D.A)(xe,[["render",he],["__scopeId","data-v-551ce886"]]);var Ce=we,Le=a(197),Ie=a(6329),Ae=a(9669),Ee=a(4750);function _e(e,t,a,l,o,s){return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(Ee.W,{modelValue:l.search,"onUpdate:modelValue":t[0]||(t[0]=e=>l.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 PT-3"},null,8,["modelValue"]),(0,r.bF)(Le.J,{flat:""},{default:(0,r.k6)((()=>[(0,r.bF)(Ie.Py,{headers:l.headers,items:l.filteredItems,search:l.search},{["item.areas"]:(0,r.k6)((({item:e})=>[(0,r.bF)(Ae.w,{small:"",color:"blue",onClick:t=>l.viewAntennas(e.mobilesItems)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-eye ")])),_:2},1032,["onClick"])])),["item.actions"]:(0,r.k6)((({item:e})=>[(0,r.bF)(Ae.w,{small:"",color:"green",class:"mr-4",onClick:t=>l.editItem(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,r.bF)(Ae.w,{small:"",color:"red",onClick:t=>l.deleteItem(e)},{default:(0,r.k6)((()=>[(0,r.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}var Fe={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAntennas"],setup(e,{emit:t}){const a=(0,u.KR)(""),l=(0,u.KR)([{key:"id",title:"ID"},{key:"name",title:"Nombre"},{key:"areas",title:"Etiquetas"},{key:"actions",title:"Acciones",sortable:!1}]),o=(0,r.EW)((()=>{if(!a.value)return s.value;const e=a.value.toLowerCase();return s.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),s=(0,r.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),n=e=>{t("deleteItem",e)},i=e=>{t("editItem",e)},d=e=>{t("viewAntennas",e)};return{search:a,headers:l,filteredItems:o,deleteItem:n,editItem:i,viewAntennas:d}}};const De=(0,D.A)(Fe,[["render",_e],["__scopeId","data-v-1b5c6feb"]]);var $e=De,Ke={components:{DataTable:$e,AntennasModal:K,createForm:ae,EditForm:Ce},setup(){const e=(0,u.KR)([]),t=(0,u.KR)(null),a=(0,u.KR)(null),l=(0,u.KR)(!1),o=(0,u.KR)(!1),s=(0,u.KR)(!1),n=(0,u.KR)(!1),i=()=>{s.value=!0},d=()=>{s.value=!1},c=()=>{l.value=!0},m=()=>{l.value=!1},f=e=>{t.value=e,o.value=!0},y=()=>{o.value=!1,t.value=null},k=e=>{a.value={...e},n.value=!0},h=()=>{n.value=!1},x=async e=>{c();try{const t=Z.A.state.token,a=e._id,r={name:e.name,mobilesItems:e.mobilesItems.map((e=>e._id))},l=await p(t,r,a);l&&(h(),m()),await L()}catch(t){console.error("Error al actualizar:",t),m()}},w=async e=>{try{const t=Z.A.state.token;await v(t,e),await L(),d()}catch(t){d(),console.error("error al crear area:",t)}},C=async e=>{c();try{const t=Z.A.state.token,a=e._id,r=await g(t,a);r&&m(),await L()}catch(t){m(),console.error("Error al obtener los layout:",t)}},L=async()=>{c();try{const t=Z.A.state.token,a=await b(t);e.value=a.data.data,a&&m()}catch(t){m(),console.error("Error al obtener las rutas:",t)}};return(0,r.sV)(L),{items:e,fetchItems:L,openLoading:c,closeLoading:m,isLoading:l,listAntennas:f,closeAntennaModal:y,deleteItems:C,isCreateFormVisible:s,openCreateForm:i,closeCreateForm:d,submitItems:w,updateItems:x,openEditForm:k,closeEditForm:h,isEditFormVisible:n,selectedItem:a,isAntennasModalVisible:o,selectedAntennas:t}}};const Ve=(0,D.A)(Ke,[["render",d]]);var Se=Ve}}]);
//# sourceMappingURL=303.718b1021.js.map