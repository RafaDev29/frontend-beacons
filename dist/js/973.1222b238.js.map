{"version":3,"file":"js/973.1222b238.js","mappings":"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","sources":["webpack://frontend-ebox-platform/./src/views/LoginView.vue","webpack://frontend-ebox-platform/../../../src/components/VForm/VForm.tsx","webpack://frontend-ebox-platform/./src/components/login/FormAuth.vue","webpack://frontend-ebox-platform/./src/components/login/FormAuth.vue?4960","webpack://frontend-ebox-platform/./src/api/LoginService.js","webpack://frontend-ebox-platform/./src/api/MenuService.js","webpack://frontend-ebox-platform/./src/views/LoginView.vue?5755"],"sourcesContent":["<template>\r\n  <div class=\"containerlogin relative flex items-start h-screen\">\r\n    <!-- Capa de color sobre la imagen de fondo -->\r\n    <div class=\"overlay absolute inset-0 bg-[#196aee] opacity-50\"></div>\r\n\r\n    <!-- Formulario alineado a la izquierda y ocupando toda la altura -->\r\n    <div class=\"form-wrapper relative w-full sm:w-3/4 md:w-2/4 lg:w-1/4 h-full p-4 bg-[#ffffff] text-white shadow-lg\">\r\n      <div class=\"formLogin h-full flex flex-col justify-center\">\r\n        <FormAuthVue @validate-login=\"onValidateLogin\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport { useRouter, useRoute } from 'vue-router';\r\nimport FormAuthVue from '@/components/login/FormAuth.vue';\r\nimport { authLoginApi } from '@/api/LoginService';\r\nimport { listarCuentasApi } from '@/api/MenuService';\r\nimport store from '@/store';\r\n\r\nexport default {\r\n  components: {\r\n    FormAuthVue,\r\n  },\r\n  setup() {\r\n    const messageError = ref('');\r\n    const statusError = ref(false);\r\n    const router = useRouter();\r\n    const route = useRoute();\r\n\r\n    const onValidateLogin = async (data) => {\r\n      try {\r\n        const response = await authLoginApi(data);\r\n        const user = response.data.data;\r\n        const token = user.token;\r\n\r\n        // Guarda los datos del usuario en el store\r\n        store.commit('setUsername', user.username);\r\n        store.commit('setToken', token);\r\n        store.commit('setRole', user.role);\r\n        store.commit('setIsAuthenticated', true);\r\n\r\n        // Consume el servicio para obtener los datos del menú\r\n        const menuResponse = await listarCuentasApi(token);\r\n\r\n        if (menuResponse.status && Array.isArray(menuResponse.data.data)) {\r\n          // Guarda los datos del menú en el store\r\n          store.commit('setMenuData', menuResponse.data.data);\r\n        } else {\r\n          console.error('La respuesta del menú no es válida:', menuResponse);\r\n        }\r\n\r\n        // Redirige a la página principal\r\n        router.push('/');\r\n      } catch (error) {\r\n        statusError.value = true;\r\n\r\n        if (error.response) {\r\n          if (error.response.status === 401) {\r\n            messageError.value = 'Las credenciales de usuario no son válidas';\r\n          } else if (error.response.status === 500) {\r\n            messageError.value = 'Error 500: Error interno del servidor';\r\n          } else {\r\n            messageError.value = error.response.data.message;\r\n          }\r\n        } else if (error.request) {\r\n          messageError.value = 'No se recibió respuesta del servidor';\r\n        } else {\r\n          messageError.value = 'Error al configurar la solicitud: ' + error.message;\r\n        }\r\n\r\n        console.error('Error en el proceso de inicio de sesión:', error);\r\n      }\r\n    };\r\n\r\n    onMounted(() => {\r\n      const username = route.query.username;\r\n      const password = route.query.password;\r\n\r\n      if (username && password) {\r\n        onValidateLogin({ username, password });\r\n      }\r\n    });\r\n\r\n    return {\r\n      onValidateLogin,\r\n      messageError,\r\n      statusError,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.containerlogin {\r\n  background-image: url('@/assets/login/background.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n\r\n  width: 100%;\r\n  height: 100%;\r\n  position: absolute;\r\n}\r\n</style>\r\n","// Composables\nimport { makeComponentProps } from '@/composables/component'\nimport { createForm, makeFormProps } from '@/composables/form'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { ref } from 'vue'\nimport { genericComponent, propsFactory, useRender } from '@/util'\n\n// Types\nimport type { SubmitEventPromise } from '@/composables/form'\n\nexport const makeVFormProps = propsFactory({\n  ...makeComponentProps(),\n  ...makeFormProps(),\n}, 'VForm')\n\ntype VFormSlots = {\n  default: ReturnType<typeof createForm>\n}\n\nexport const VForm = genericComponent<VFormSlots>()({\n  name: 'VForm',\n\n  props: makeVFormProps(),\n\n  emits: {\n    'update:modelValue': (val: boolean | null) => true,\n    submit: (e: SubmitEventPromise) => true,\n  },\n\n  setup (props, { slots, emit }) {\n    const form = createForm(props)\n    const formRef = ref<HTMLFormElement>()\n\n    function onReset (e: Event) {\n      e.preventDefault()\n      form.reset()\n    }\n\n    function onSubmit (_e: Event) {\n      const e = _e as SubmitEventPromise\n\n      const ready = form.validate()\n      e.then = ready.then.bind(ready)\n      e.catch = ready.catch.bind(ready)\n      e.finally = ready.finally.bind(ready)\n\n      emit('submit', e)\n\n      if (!e.defaultPrevented) {\n        ready.then(({ valid }) => {\n          if (valid) {\n            formRef.value?.submit()\n          }\n        })\n      }\n\n      e.preventDefault()\n    }\n\n    useRender(() => ((\n      <form\n        ref={ formRef }\n        class={[\n          'v-form',\n          props.class,\n        ]}\n        style={ props.style }\n        novalidate\n        onReset={ onReset }\n        onSubmit={ onSubmit }\n      >\n        { slots.default?.(form) }\n      </form>\n    )))\n\n    return forwardRefs(form, formRef)\n  },\n})\n\nexport type VForm = InstanceType<typeof VForm>\n","<template>\r\n  <div class=\"flex items-center justify-center min-h-screen bg-[#ffffff] p-4\">\r\n    <div class=\"w-full max-w-md bg-transparent shadow-none p-6\">\r\n      <div class=\"flex justify-center mb-4\">\r\n        <img :src=\"LogoImage\" alt=\"Logo\" class=\"w-20 h-20\">\r\n      </div>\r\n      <h1 class=\"text-lg text-[#0571ec] text-center mb-4 font-bold\">Bienvenido de nuevo a eBeacons!!</h1>\r\n      <p class=\"text-xs text-gray-900 text-center mb-4\">\r\n        Ingresa sus credenciales\r\n      </p>\r\n      <v-form @submit.prevent=\"validateLogin\">\r\n        <v-text-field v-model=\"username\" label=\"Usuario\" prepend-inner-icon=\"mdi-account-outline\" variant=\"outlined\"\r\n          color=\"#0571ec\" class=\"text-black w-full mb-4\"></v-text-field>\r\n        <v-text-field v-model=\"password\" label=\"Contraseña\"\r\n          :append-inner-icon=\"showPassword ? 'mdi-eye-off' : 'mdi-eye'\" :type=\"showPassword ? 'text' : 'password'\"\r\n          prepend-inner-icon=\"mdi-lock-outline\" variant=\"outlined\" color=\"#0571ec\" class=\"text-black w-full mb-4\"\r\n          @click:append-inner=\"togglePasswordVisibility\"></v-text-field>\r\n        <v-btn type=\"submit\" color=\"#196aee\" class=\"w-full mt-4  font-bold\">Ingresar</v-btn>\r\n      </v-form>\r\n      <div class=\"mt-8 text-gray-400 text-sm text-center\">\r\n        <p class=\"font-semibold\">\r\n          Presencia en tiempo real,\r\n        </p>\r\n        <p>\r\n          decisiones al instante.\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref } from 'vue';\r\n\r\nimport logoImage from '@/assets/login/logo_sysnet.png';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      LogoImage: logoImage,\r\n    };\r\n  },\r\n  emits: ['validate-login'],\r\n  setup(_, { emit }) {\r\n    const username = ref('');\r\n    const password = ref('');\r\n    const showPassword = ref(false);\r\n\r\n    const validateLogin = () => {\r\n      const data = {\r\n        username: username.value,\r\n        password: password.value,\r\n      };\r\n      emit('validate-login', data);\r\n    };\r\n\r\n    const togglePasswordVisibility = () => {\r\n      showPassword.value = !showPassword.value;\r\n    };\r\n\r\n    return {\r\n      username,\r\n      password,\r\n      validateLogin,\r\n      togglePasswordVisibility,\r\n      showPassword,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* No se requiere mucho CSS adicional con Tailwind CSS aplicado directamente */\r\n</style>\r\n","import { render } from \"./FormAuth.vue?vue&type=template&id=d810c222&scoped=true\"\nimport script from \"./FormAuth.vue?vue&type=script&lang=js\"\nexport * from \"./FormAuth.vue?vue&type=script&lang=js\"\n\nimport \"./FormAuth.vue?vue&type=style&index=0&id=d810c222&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-d810c222\"]])\n\nexport default __exports__","import axiosInstance from '@/config/http.config';\r\n// import axios from 'axios';\r\n\r\nconst baseURL = process.env.VUE_APP_BASE_URL;\r\n\r\n\r\nexport function authLoginApi(payload) {\r\n  \r\n    return axiosInstance.post(`${baseURL}/auth/login`, payload)\r\n}","import axiosInstance from \"@/config/http.config\";\n// import axios from 'axios';\n\nconst baseURL = process.env.VUE_APP_BASE_URL;\n\nexport function listarCuentasApi(token) {\n  return axiosInstance.get(`${baseURL}/menu-navigation`, {\n    headers: {\n      Authorization: `Bearer ${token}`,\n    },\n  });\n}\n","import { render } from \"./LoginView.vue?vue&type=template&id=5f03b32a&scoped=true\"\nimport script from \"./LoginView.vue?vue&type=script&lang=js\"\nexport * from \"./LoginView.vue?vue&type=script&lang=js\"\n\nimport \"./LoginView.vue?vue&type=style&index=0&id=5f03b32a&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-5f03b32a\"]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_FormAuthVue","onValidateLogin","$setup","makeVFormProps","propsFactory","makeComponentProps","makeFormProps","VForm","genericComponent","name","props","emits","val","submit","e","setup","_ref","slots","emit","form","createForm","formRef","ref","onReset","preventDefault","reset","onSubmit","_e","ready","validate","then","bind","catch","finally","defaultPrevented","_ref2","valid","value","useRender","style","default","forwardRefs","src","$data","LogoImage","alt","_hoisted_5","_hoisted_6","_component_v_form","_withModifiers","validateLogin","_withCtx","_component_v_text_field","modelValue","username","_cache","$event","label","variant","color","password","showPassword","type","togglePasswordVisibility","_component_v_btn","_createTextVNode","_","_hoisted_7","data","logoImage","__exports__","baseURL","process","authLoginApi","payload","axiosInstance","post","listarCuentasApi","token","get","headers","Authorization","components","FormAuthVue","messageError","statusError","router","useRouter","route","useRoute","async","response","user","store","commit","role","menuResponse","status","Array","isArray","console","error","push","message","request","onMounted","query","render"],"sourceRoot":""}