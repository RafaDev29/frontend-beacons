"use strict";(self["webpackChunkfrontend_ebox_platform"]=self["webpackChunkfrontend_ebox_platform"]||[]).push([[247],{7247:function(e,t,r){r.r(t),r.d(t,{default:function(){return ce}});var o=r(6768);const s={class:"flex justify-between items-center"},a=(0,o.Lk)("h1",{class:"font-bold lg:text-2xl text-xl text-gray-500 mb-5"}," Layout",-1),l={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-900 bg-opacity-75 z-50"},i=(0,o.Lk)("div",{class:"flex flex-col items-center space-y-4"},[(0,o.Lk)("div",{class:"animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-white"}),(0,o.Lk)("p",{class:"text-white text-lg font-semibold"},"Cargando, por favor espera...")],-1),n=[i];function d(e,t,r,i,d,u){const m=(0,o.g2)("formTable"),c=(0,o.g2)("createForm"),b=(0,o.g2)("EditForm");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.Lk)("div",null,[(0,o.Lk)("div",s,[a,(0,o.Lk)("button",{class:"flex items-center justify-center bg-[#318bf1] text-white font-semibold px-5 py-2 rounded-lg hover:bg-orange-500 shadow-md",onClick:t[0]||(t[0]=(...e)=>i.openCreateForm&&i.openCreateForm(...e))}," Crear + ")]),(0,o.bF)(m,{items:i.items,onViewAreas:i.listAreas,onDeleteItem:i.deleteItems,onEditItem:i.openEditForm},null,8,["items","onViewAreas","onDeleteItem","onEditItem"]),i.isCreateFormVisible?((0,o.uX)(),(0,o.Wv)(c,{key:0,onClose:i.closeCreateForm,onItemCreate:i.submitItems},null,8,["onClose","onItemCreate"])):(0,o.Q3)("",!0),i.isEditFormVisible?((0,o.uX)(),(0,o.Wv)(b,{key:1,item:i.selectedItem,onClose:i.closeEditForm,onUpdateItem:i.updateItems},null,8,["item","onClose","onUpdateItem"])):(0,o.Q3)("",!0)]),i.isLoading?((0,o.uX)(),(0,o.CE)("div",l,n)):(0,o.Q3)("",!0)],64)}var u=r(144),m=r(1189);const c="http://198.211.99.223:3000/api/v1";function b(e){return m.A.get(`${c}/operators`,{headers:{Authorization:`Bearer ${e}`}})}function p(e,t){return m.A.delete(`${c}/operators/${t}`,{headers:{Authorization:`Bearer ${e}`}})}function f(e,t){return m.A.post(`${c}/operators`,t,{headers:{Authorization:`Bearer ${e}`}})}function g(e,t,r){return m.A.patch(`${c}/operators/${r}`,t,{headers:{Authorization:`Bearer ${e}`}})}var y=r(197),k=r(6329),x=r(9669),v=r(4750);function h(e,t,r,s,a,l){return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(v.W,{modelValue:s.search,"onUpdate:modelValue":t[0]||(t[0]=e=>s.search=e),label:"Buscar","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"","single-line":"",class:"mb-5 PT-3"},null,8,["modelValue"]),(0,o.bF)(y.J,{flat:""},{default:(0,o.k6)((()=>[(0,o.bF)(k.Py,{headers:s.headers,items:s.filteredItems,search:s.search},{["item.actions"]:(0,o.k6)((({item:e})=>[(0,o.bF)(x.w,{small:"",color:"green",class:"mr-4",onClick:t=>s.editItem(e)},{default:(0,o.k6)((()=>[(0,o.eW)(" mdi-pencil ")])),_:2},1032,["onClick"]),(0,o.bF)(x.w,{small:"",color:"red",onClick:t=>s.deleteItem(e)},{default:(0,o.k6)((()=>[(0,o.eW)(" mdi-delete ")])),_:2},1032,["onClick"])])),_:2},1032,["headers","items","search"])])),_:1})],64)}var w={name:"DataTable",props:{items:{type:Array,required:!0}},emits:["deleteItem","editItem","viewAreas"],setup(e,{emit:t}){const r=(0,u.KR)(""),s=(0,u.KR)([{key:"id",title:"ID"},{key:"user.username",title:"Usuario"},{key:"name",title:"Nombre"},{key:"phone",title:"Celular"},{key:"actions",title:"Acciones",sortable:!1}]),a=(0,o.EW)((()=>{if(!r.value)return l.value;const e=r.value.toLowerCase();return l.value.filter((t=>Object.values(t).some((t=>String(t).toLowerCase().includes(e)))))})),l=(0,o.EW)((()=>e.items.map(((e,t)=>({id:t+1,...e}))))),i=e=>{t("deleteItem",e)},n=e=>{t("editItem",e)},d=e=>{t("viewAreas",e)};return{search:r,headers:s,filteredItems:a,deleteItem:i,editItem:n,viewAreas:d}}},L=r(1241);const I=(0,L.A)(w,[["render",h],["__scopeId","data-v-e2af34a6"]]);var C=I,A=r(5130);const F={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},E={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},V=(0,o.Lk)("h2",{class:"text-xl font-semibold text-gray-700 mb-4 text-center"},"Crear Nuevo Operador",-1),U={class:"mb-4"},K=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1),R={class:"mb-4"},$=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Teléfono",-1),_={class:"mb-4"},j=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1),q={class:"mb-4"},D=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1),W={class:"flex justify-end space-x-2"},X=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"}," Guardar ",-1);function J(e,t,r,s,a,l){return s.item?((0,o.uX)(),(0,o.CE)("div",F,[(0,o.Lk)("div",E,[V,(0,o.Lk)("form",{onSubmit:t[5]||(t[5]=(0,A.D$)(((...e)=>s.submitForm&&s.submitForm(...e)),["prevent"]))},[(0,o.Lk)("div",U,[K,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.form.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[A.Jo,s.form.name]])]),(0,o.Lk)("div",R,[$,(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>s.form.phone=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 929831019",required:""},null,512),[[A.Jo,s.form.phone]])]),(0,o.Lk)("div",_,[j,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.form.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[A.Jo,s.form.username]])]),(0,o.Lk)("div",q,[D,(0,o.bo)((0,o.Lk)("input",{type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.form.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[A.Jo,s.form.password]])]),(0,o.Lk)("div",W,[(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>s.closeDialog&&s.closeDialog(...e)),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),X])],32)])])):(0,o.Q3)("",!0)}var P={emits:["close","ItemCreate"],setup(e,{emit:t}){const r=(0,u.KR)(!0),o=(0,u.KR)({name:"",phone:"",username:"",password:""}),s=()=>{t("close")},a=async()=>{t("ItemCreate",o.value)};return{item:r,form:o,closeDialog:s,submitForm:a}}};const B=(0,L.A)(P,[["render",J]]);var N=B;const T={key:0,class:"fixed inset-0 flex items-center justify-center bg-gray-800 bg-opacity-50"},z={class:"bg-white rounded-lg shadow-lg max-w-md w-full p-6"},Q=(0,o.Lk)("h2",{class:"text-lg font-semibold text-gray-700 mb-4 text-center"},"Editar Operador",-1),O={class:"mb-4"},S=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre",-1),G={class:"mb-4"},M=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Teléfono",-1),H={class:"mb-4"},Y=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Nombre de Usuario",-1),Z={class:"mb-4 relative"},ee=(0,o.Lk)("label",{class:"block text-sm font-medium text-gray-500 mb-1"},"Contraseña",-1),te={class:"flex"},re=["type"],oe={class:"flex justify-end space-x-2"},se=(0,o.Lk)("button",{type:"submit",class:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600"}," Guardar Cambios ",-1);function ae(e,t,r,s,a,l){return r.item?((0,o.uX)(),(0,o.CE)("div",T,[(0,o.Lk)("div",z,[Q,(0,o.Lk)("form",{onSubmit:t[6]||(t[6]=(0,A.D$)(((...e)=>s.submitUpdate&&s.submitUpdate(...e)),["prevent"]))},[(0,o.Lk)("div",O,[S,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>s.editedItem.name=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[A.Jo,s.editedItem.name]])]),(0,o.Lk)("div",G,[M,(0,o.bo)((0,o.Lk)("input",{type:"tel","onUpdate:modelValue":t[1]||(t[1]=e=>s.editedItem.phone=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 929831019",required:""},null,512),[[A.Jo,s.editedItem.phone]])]),(0,o.Lk)("div",H,[Y,(0,o.bo)((0,o.Lk)("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=e=>s.editedItem.user.username=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,512),[[A.Jo,s.editedItem.user.username]])]),(0,o.Lk)("div",Z,[ee,(0,o.Lk)("div",te,[(0,o.bo)((0,o.Lk)("input",{type:s.showPassword?"text":"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.editedItem.user.password=e),class:"w-full border border-gray-300 rounded-lg py-2 px-3 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:""},null,8,re),[[A.hp,s.editedItem.user.password]]),(0,o.Lk)("button",{type:"button",onClick:t[4]||(t[4]=(...e)=>s.togglePasswordVisibility&&s.togglePasswordVisibility(...e)),class:"ml-2 flex items-center text-gray-500 hover:text-gray-700"},[s.showPassword?((0,o.uX)(),(0,o.Wv)(x.w,{key:1,class:"mdi mdi-eye"})):((0,o.uX)(),(0,o.Wv)(x.w,{key:0,class:"mdi mdi-eye-off"}))])])]),(0,o.Lk)("div",oe,[(0,o.Lk)("button",{type:"button",onClick:t[5]||(t[5]=t=>e.$emit("close")),class:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300"}," Cancelar "),se])],32)])])):(0,o.Q3)("",!0)}var le={props:{item:{type:Object,required:!0}},emits:["close","updateItem"],setup(e,{emit:t}){const r=(0,u.KR)({...e.item}),s=(0,u.KR)(!1);(0,o.wB)((()=>e.item),(e=>{r.value={...e}}));const a=()=>{s.value=!s.value},l=()=>{t("updateItem",r.value)};return{editedItem:r,showPassword:s,togglePasswordVisibility:a,submitUpdate:l}}};const ie=(0,L.A)(le,[["render",ae]]);var ne=ie,de=r(5129),ue={components:{formTable:C,createForm:N,EditForm:ne},setup(){const e=(0,u.KR)([]),t=(0,u.KR)(null),r=(0,u.KR)(null),s=(0,u.KR)(!1),a=(0,u.KR)(!1),l=(0,u.KR)(!1),i=(0,u.KR)(!1),n=()=>{l.value=!0},d=()=>{l.value=!1},m=()=>{s.value=!0},c=()=>{s.value=!1},y=e=>{t.value=e,a.value=!0},k=()=>{a.value=!1,t.value=null},x=e=>{r.value={...e},i.value=!0},v=()=>{i.value=!1},h=async e=>{m();try{const t=de.A.state.token,r=e._id,o={name:e.name},s=await g(t,o,r);s&&(v(),c()),await I()}catch(t){c()}},w=async e=>{try{const t=de.A.state.token;await f(t,e),await I(),d()}catch(t){console.error("error al crear operador:",t)}},L=async e=>{m();try{const t=de.A.state.token,r=e._id,o=await p(t,r);o&&c(),await I()}catch(t){c(),console.error("Error al obtener los layout:",t)}},I=async()=>{m();try{const t=de.A.state.token,r=await b(t);e.value=r.data.data,r&&c()}catch(t){c(),console.error("Error al obtener las rutas:",t)}};return(0,o.sV)(I),{items:e,fetchItems:I,openLoading:m,closeLoading:c,isLoading:s,listAreas:y,closeAreasModal:k,selectedAreas:t,isAreasModalVisible:a,deleteItems:L,isCreateFormVisible:l,openCreateForm:n,closeCreateForm:d,submitItems:w,updateItems:h,openEditForm:x,closeEditForm:v,isEditFormVisible:i,selectedItem:r}}};const me=(0,L.A)(ue,[["render",d]]);var ce=me}}]);
//# sourceMappingURL=247.730a7eba.js.map